"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@paraswap/core"),e=require("ts-essentials");function r(t,e,r,n,a,s,o){try{var i=t[s](o),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,a)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(a,s){var o=t.apply(e,n);function i(t){r(o,a,s,i,u,"next",t)}function u(t){r(o,a,s,i,u,"throw",t)}i(void 0)}))}}function a(){return a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a.apply(this,arguments)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,r){return u=i()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var a=new(Function.bind.apply(t,n));return r&&o(a,r.prototype),a},u.apply(null,arguments)}function c(t){var e="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,t)},c(t)}function p(t,e){if(null==t)return{};var r,n,a={},s=Object.keys(t);for(n=0;n<s.length;n++)e.indexOf(r=s[n])>=0||(a[r]=t[r]);return a}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var f={exports:{}};!function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=Object.create((e&&e.prototype instanceof m?e:m).prototype),s=new I(n||[]);return a._invoke=function(t,e,r){var n=d;return function(a,s){if(n===l)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw s;return P()}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var i=S(o,r);if(i){if(i===v)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=l;var u=p(t,e,r);if("normal"===u.type){if(n=r.done?h:f,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=h,r.method="throw",r.arg=u.arg)}}}(t,r,s),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",l="executing",h="completed",v={};function m(){}function k(){}function y(){}var g={};u(g,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==r&&n.call(x,s)&&(g=x);var A=y.prototype=m.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(a,s,o,i){var u=p(t[a],t,s);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,i)}),(function(t){r("throw",t,o,i)})):e.resolve(d).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,i)}))}i(u.arg)}var a;this._invoke=function(t,n){function s(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(s,s):s()}}function S(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=p(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var s=a.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function R(t){if(t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:P}}function P(){return{value:e,done:!0}}return k.prototype=y,u(A,"constructor",y),u(y,"constructor",k),k.displayName=u(y,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,i,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},b(T.prototype),u(T.prototype,o,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,a,s){void 0===s&&(s=Promise);var o=new T(c(e,r,n,a),s);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},b(A),u(A,i,"Generator"),u(A,s,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(f);var l=f.exports,h="https://api.paraswap.io";function v(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.every((function(e){return"function"==typeof t[e]}))}function m(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];e.assert(v.apply(void 0,[t].concat(n)),"Contract must have methods: "+n.join(", "))}function k(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.every((function(e){return"function"==typeof t.methods[e]}))}function y(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];e.assert(k.apply(void 0,[t].concat(n)),"Contract must have methods: "+n.join(", "))}var g=function(t){var e=Object.entries(t).filter((function(t){return void 0!==t[1]})).map((function(t){return[t[0],String(t[1])]})),r=new URLSearchParams(e).toString();return r&&"?"+r},w=function(t){return t instanceof x},x=function(t){var e,r;function n(e){var r,a=e.code,s=e.request,o=e.response,i=e.isAxiosError,u=e.message;if((r=t.call(this)||this).code=void 0,r.status=void 0,r.request=void 0,r.response=void 0,r.isAxiosError=!1,Error.captureStackTrace&&Error.captureStackTrace(d(r),n),r.name=r.constructor.name,r.code=a,r.request=s,r.isAxiosError=i,!o)return r.message=u,d(r);r.response=o;var c=o.data;return r.status=o.status,r.message=A(c)?c.error:u,r}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,o(e,r),n}(c(Error));function A(t){return!!(e=t)&&"object"==typeof e&&"string"==typeof t.error;var e}var b=function(t){return t.length>0};function T(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}var S=function(t){var e,r,a=t.apiURL,s=t.version,o=t.fetcher,i=(void 0===a?h:a)+"/adapters/contracts"+g({network:t.chainId,version:void 0===s?"5":s}),u=function(){var t=n(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o({url:i,method:"GET",signal:e});case 2:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=(e=u,function(){var t;return null!=(t=r)?t:r=e.apply(void 0,arguments)}),p=function(){var t=n(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:return t.abrupt("return",t.sent.TokenTransferProxy);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=n(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:return t.abrupt("return",t.sent.AugustusSwapper);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=n(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:return t.abrupt("return",t.sent.AugustusRFQ);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{getContracts:c,getSpender:p,getAugustusSwapper:d,getAugustusRFQ:f}},L=[{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}];function O(t,e){return function(){var r=n(l.mark((function r(n,a,s,o){var i;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===s&&(s={}),r.next=3,e(o);case 3:return i=r.sent,r.next=6,t.transactCall({address:a,abi:L,contractMethod:"approve",args:[i,n],overrides:s});case 6:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})));return function(t,e,n,a){return r.apply(this,arguments)}}()}var I=function(t){var e=S(t),r=O(t.contractCaller,e.getSpender),a=function(){var t=n(l.mark((function t(e,n,a,s){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(n.map((function(t){return r(e,t,a,s)}))));case 1:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}();return{approveToken:r,approveTokenBulk:a}},R=["tokenType","mainConnector","connectors","network"],P=function(t){var e=t.tokenType,r=void 0===e?"ERC20":e,n=t.mainConnector,s=void 0===n?"ETH":n,o=t.connectors,i=void 0===o?[]:o,u=t.network,c=void 0===u?1:u,d=p(t,R);return a({tokenType:r,connectors:i.length>0?i:[s],mainConnector:s,network:c},d)},C={message:"Not Found"},E=function(t){var e=t.apiURL,r=t.fetcher,a=(void 0===e?h:e)+"/users/tokens/"+t.chainId,s=function(){var t=n(l.mark((function t(e,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a+"/"+e,t.next=3,r({url:s,method:"GET",signal:n});case 3:return o=t.sent.tokens.map(P),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o=function(){var t=n(l.mark((function t(e,n,s){var o,i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a+"/"+e+"/"+n,t.next=3,r({url:o,method:"GET",signal:s});case 3:if((i=t.sent).token){t.next=6;break}return t.abrupt("return",C);case 6:return t.abrupt("return",P(i.token));case 7:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),i=function(){var t=n(l.mark((function t(e,r,n){var a,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Set(r.map((function(t){return t.toLowerCase()}))),t.next=3,s(e,n);case 3:return o=t.sent.filter((function(t){return a.has(t.address.toLowerCase())})).map((function(t){var e=t.allowance;return{tokenAddress:t.address,allowance:void 0===e?"0":e}})),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),u=function(){var t=n(l.mark((function t(e,r,n){var a,s;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(e,r,n);case 2:if(!("message"in(a=t.sent))){t.next=5;break}return t.abrupt("return",a);case 5:return t.abrupt("return",{tokenAddress:a.address,allowance:void 0===(s=a.allowance)?"0":s});case 7:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();return{getBalance:o,getBalances:s,getAllowance:u,getAllowances:i}},F=function(t){var e=t.apiURL,r=void 0===e?h:e,a=t.version,s=void 0===a?"5":a,o=t.chainId,i=t.fetcher,u=function(){var t=n(l.mark((function t(e){var n,a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g({network:o,version:s}),a=r+"/adapters/list"+n,t.next=4,i({url:a,method:"GET",signal:e});case 4:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{getAdapters:u}},M=["options"],U=["excludePricingMethods","excludeContractMethods","includeContractMethods","partner","includeDEXS","excludeDEXS","excludePools"];function B(t){var e=t.options,r=void 0===e?{}:e,n=p(t,M),s=r.excludePricingMethods,o=r.excludeContractMethods,i=r.includeContractMethods,u=r.partner,c=void 0===u?"paraswap.io":u,d=r.includeDEXS,f=r.excludeDEXS,l=r.excludePools,h=p(r,U),v=[d,f,l,s,o,i].map((function(t){return(null==t?void 0:t.join(","))||void 0}));return a({},{excludePricingMethods:v[3],excludeContractMethods:v[4],includeContractMethods:v[5],partner:c,includeDEXS:v[0],excludeDEXS:v[1],excludePools:v[2]},h,n)}var N,D=["srcToken","destToken"],_=["route"];!function(t){t.megapath="megapath",t.multipath="multipath",t.simplepath="simplepath"}(N||(N={}));var j=function(t){var e=t.apiURL,r=t.version,s=void 0===r?"5":r,o=t.chainId,i=t.fetcher,u=(void 0===e?h:e)+"/prices",c=function(){var t=n(l.mark((function t(e,r){var n,c,d,f,h,v;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.srcToken,c=e.destToken,d=p(e,D),f=B(d),h=g(a({srcToken:n,destToken:c,network:o,version:s},f)),v=u+"/"+h,t.next=6,i({url:v,method:"GET",signal:r});case 6:return t.abrupt("return",t.sent.priceRoute);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),d=function(){var t=n(l.mark((function t(e,r){var n,c,d,f,h,v;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.route,c=p(e,_),!(n.length<2)){t.next=3;break}throw new Error("Invalid Route");case 3:return d=B(c),f=n.join("-"),h=g(a({route:f,network:o,version:s},d)),v=u+"/"+h,t.next=9,i({url:v,method:"GET",signal:r});case 9:return t.abrupt("return",t.sent.priceRoute);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return{getRate:c,getRateByRoute:d}},G=["srcToken","destToken","amount","route"],z=function(t){var e=t.apiURL,r=t.version,s=void 0===r?"5":r,o=t.chainId,i=t.fetcher,u=(void 0===e?h:e)+"/swap",c=function(){var t=n(l.mark((function t(e,r){var n,c,d,f,h,v,m,k,y;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.srcToken,c=e.destToken,d=e.amount,f=e.route,h=p(e,G),v=B(h),m=null==f?void 0:f.join("-"),k=g(a({amount:d,srcToken:n,destToken:c,route:m,network:o,version:s},v)),y=u+"/"+k,t.next=7,i({url:y,method:"GET",signal:r});case 7:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return{getSwapTxData:c}},K=function(t){var e=t.apiURL,r=t.fetcher,a=(void 0===e?h:e)+"/tokens/"+t.chainId,s=function(){var t=n(l.mark((function t(e){var n;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r({url:a,method:"GET",signal:e});case 2:return n=t.sent.tokens.map(P),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{getTokens:s}},q="0x0000000000000000000000000000000000000000";function H(t){return function(e){var r=e.chainId,n=e.apiURL;return function(e){return e?"fillablebalance"===e?n+"/"+t+"/fillablebalance/"+r:n+"/"+t+"/"+("LIMIT"===e?"orders":"p2p")+"/"+r:n+"/"+t+"/order"}}}function Q(t){return{nonceAndMeta:t.nonceAndMeta,expiry:t.expiry,makerAsset:t.makerAsset,takerAsset:t.takerAsset,maker:t.maker,taker:t.taker,makerAmount:t.makerAmount,takerAmount:t.takerAmount}}var X=H("ft"),Y=[{name:"nonceAndMeta",type:"uint256"},{name:"expiry",type:"uint128"},{name:"makerAsset",type:"uint256"},{name:"makerAssetId",type:"uint256"},{name:"takerAsset",type:"uint256"},{name:"takerAssetId",type:"uint256"},{name:"maker",type:"address"},{name:"taker",type:"address"},{name:"makerAmount",type:"uint256"},{name:"takerAmount",type:"uint256"}];function V(t){var e=t.chainId,r=t.verifyingContract,n=t.nonce,a=void 0===n?T():n,s=t.expiry,o=t.makerAsset,i=t.takerAsset,u=t.makerAmount,c=t.takerAmount,p=t.makerAssetId,d=t.takerAssetId,f=void 0===d?"0":d,l=t.makerAssetType,h=t.takerAssetType,v=t.maker,m=t.AugustusAddress,k=t.taker,y=(BigInt(void 0===k?q:k)+(BigInt(a)<<BigInt(160))).toString(10),g=W(o,l),w=W(i,h);return{types:{OrderNFT:Y},domain:{name:"AUGUSTUS RFQ",version:"1",chainId:e,verifyingContract:r},data:{nonceAndMeta:y,expiry:s,makerAsset:g,takerAsset:w,maker:v,taker:m,makerAmount:u,takerAmount:c,makerAssetId:p,takerAssetId:f}}}function W(t,e){return(BigInt(t)+(BigInt(e)<<BigInt(160))).toString(10)}function J(t){var e=t.makerAsset,r=t.takerAsset,n=t.maker,a=t.taker,s=t.makerAmount,o=t.takerAmount,i=t.makerAssetId,u=t.takerAssetId,c=t.makerAssetType,p=t.takerAssetType;return{nonceAndMeta:t.nonceAndMeta,expiry:t.expiry,makerAsset:void 0!==c&&e.startsWith("0x")?W(e,c):e,takerAsset:void 0!==p&&r.startsWith("0x")?W(r,p):r,maker:n,taker:a,makerAmount:s,takerAmount:o,makerAssetId:i,takerAssetId:u}}var $=H("nft"),Z=function(r){var s=r.apiURL,o=r.fetcher,i=(void 0===s?h:s)+"/transactions/"+r.chainId,u=function(){var r=n(l.mark((function r(n,s,u){var c,p,d,f,h,v,m,k;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===s&&(s={}),"priceRoute"in n&&"destAmount"in n&&!("orders"in n)&&(d=(p=n.priceRoute.side)===t.SwapSide.SELL?"Source Amount Mismatch":"Destination Amount Mismatch",e.assert(tt({queryParams:n,side:p,priceRoute:n.priceRoute}),d)),f=g(s),h=i+"/"+f,v="orders"in n&&n.orders.length>0?a({},n,{orders:n.orders.map((function(t){var e=a({},"makerAssetId"in t?J(t):Q(t),{signature:t.signature});return t.permitMakerAsset&&(e.permitMakerAsset=t.permitMakerAsset),e}))}):n,m=null!=(c=n.takeSurplus)?c:void 0!==n.positiveSlippageToUser?!n.positiveSlippageToUser:void 0,"positiveSlippageToUser"in v&&delete v.positiveSlippageToUser,void 0!==m&&(v.takeSurplus=m),k={url:h,method:"POST",data:v,signal:u},r.next=11,o(k);case 11:return r.abrupt("return",r.sent);case 13:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}();return{buildTx:u}};function tt(e){var r=e.queryParams,n=e.side,a=e.priceRoute;if(r.slippage)return n===t.SwapSide.BUY&&r.destAmount===a.destAmount||n===t.SwapSide.SELL&&r.srcAmount===a.srcAmount;var s=n===t.SwapSide.SELL?[r.srcAmount,a.srcAmount]:[r.destAmount,a.destAmount];return s[0]===s[1]}var et=[{name:"nonceAndMeta",type:"uint256"},{name:"expiry",type:"uint128"},{name:"makerAsset",type:"address"},{name:"takerAsset",type:"address"},{name:"maker",type:"address"},{name:"taker",type:"address"},{name:"makerAmount",type:"uint256"},{name:"takerAmount",type:"uint256"}];function rt(t){var e,r=t.chainId,n=t.verifyingContract,a=t.nonce,s=void 0===a?T():a,o=t.expiry,i=t.makerAsset,u=t.takerAsset,c=t.makerAmount,p=t.takerAmount,d=t.maker,f=t.AugustusAddress,l=t.taker,h=void 0===l?q:l,v=t.contractTaker,m=t.AppVersion,k=(BigInt(h)+(BigInt(s)<<BigInt(160))).toString(10);return e=v||(h===q?q:m.startsWith("6.")?h:f),{types:{Order:et},domain:{name:"AUGUSTUS RFQ",version:"1",chainId:r,verifyingContract:n},data:{nonceAndMeta:k,expiry:o,makerAsset:i,takerAsset:u,maker:d,taker:e,makerAmount:c,takerAmount:p}}}var nt=function(t){var e=t.chainId,r=S(t).getContracts,s=function(){var s=n(l.mark((function n(s,o){var i,u,c;return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(o);case 2:return c=null!=(i=t.version)?i:"5",n.abrupt("return",rt(a({},s,{chainId:e,verifyingContract:(u=n.sent).AugustusRFQ,AugustusAddress:u.AugustusSwapper,AppVersion:c})));case 7:case"end":return n.stop()}}),n)})));return function(t,e){return s.apply(this,arguments)}}();return{buildLimitOrder:s}},at=function(t){return{signLimitOrder:function(e){var r=a({},e,{data:Q(e.data)});return t.contractCaller.signTypedDataCall(r)}}},st=[{inputs:[{internalType:"bytes32",name:"orderHash",type:"bytes32"}],name:"cancelOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"orderHashes",type:"bytes32[]"}],name:"cancelOrders",outputs:[],stateMutability:"nonpayable",type:"function"}],ot=function(t){var e=S(t).getAugustusRFQ,r=function(){var r=n(l.mark((function r(n,a,s){var o;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===a&&(a={}),r.next=3,e(s);case 3:return o=r.sent,r.next=6,t.contractCaller.transactCall({address:o,abi:st,contractMethod:"cancelOrder",args:[n],overrides:a});case 6:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}(),a=function(){var r=n(l.mark((function r(n,a,s){var o;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===a&&(a={}),r.next=3,e(s);case 3:return o=r.sent,r.next=6,t.contractCaller.transactCall({address:o,abi:st,contractMethod:"cancelOrders",args:[n],overrides:a});case 6:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}();return{cancelLimitOrder:r,cancelLimitOrderBulk:a}},it=[{inputs:[{components:[{internalType:"uint256",name:"nonceAndMeta",type:"uint256"},{internalType:"uint128",name:"expiry",type:"uint128"},{internalType:"address",name:"makerAsset",type:"address"},{internalType:"address",name:"takerAsset",type:"address"},{internalType:"address",name:"maker",type:"address"},{internalType:"address",name:"taker",type:"address"},{internalType:"uint256",name:"makerAmount",type:"uint256"},{internalType:"uint256",name:"takerAmount",type:"uint256"}],internalType:"struct AugustusRFQ.Order",name:"order",type:"tuple"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"fillOrder",outputs:[],stateMutability:"nonpayable",type:"function"}];function ut(t){var e=S(t).getAugustusRFQ,r=function(){var r=n(l.mark((function r(n,a,s,o){var i,u;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===s&&(s={}),r.next=3,e(o);case 3:return i=r.sent,u=Q(n),r.next=7,t.contractCaller.transactCall({address:i,abi:it,contractMethod:"fillOrder",args:[u,a],overrides:s});case 7:return r.abrupt("return",r.sent);case 9:case"end":return r.stop()}}),r)})));return function(t,e,n,a){return r.apply(this,arguments)}}();return{fillOrderDirectly:r}}var ct=function(t){var e=t.apiURL,r=t.fetcher,a=X({apiURL:void 0===e?h:e,chainId:t.chainId}),s=function(){var t=n(l.mark((function t(e,n){var s,o,i,u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(e.type),o="maker"in e?"maker/"+e.maker:"taker/"+e.taker,i=g({offset:e.offset,limit:e.limit,hideSmallBalances:e.hideSmallBalances,orderBy:e.orderBy}),u=s+"/"+o+i,t.next=7,r({url:u,method:"GET",signal:n});case 7:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o=function(){var t=n(l.mark((function t(e,n){var s,o,i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a("fillablebalance"),o=s+"/"+e.maker,i=e.token?o+"/"+e.token:o,t.next=5,r({url:i,method:"GET",signal:n});case 5:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),i=function(){var t=n(l.mark((function t(e,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(),o=s+"/"+e,t.next=4,r({url:o,method:"GET",signal:n});case 4:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return{getLimitOrders:s,getLimitOrderByHash:i,getRequiredBalance:o}},pt=function(t){var e=t.apiURL,r=t.fetcher,a=X({apiURL:void 0===e?h:e,chainId:t.chainId}),s=function(){var t=n(l.mark((function t(e,n,s){var o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a(n),t.next=3,r({url:o,method:"POST",data:e,signal:s});case 3:return t.abrupt("return",t.sent.order);case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();return{postLimitOrder:function(t,e){return s(t,"LIMIT",e)},postP2POrder:function(t,e){return s(t,"P2P",e)}}},dt=function(t){var e=S(t);return{approveMakerTokenForLimitOrder:O(t.contractCaller,e.getAugustusRFQ),approveTakerTokenForLimitOrder:I(t).approveToken}},ft=function(t){var e=S(t);return{getLimitOrdersContract:e.getAugustusRFQ,getTokenTransferProxy:e.getSpender}},lt=["srcToken","destToken","amount","options"],ht=function(r){var s=r.apiURL,o=void 0===s?h:s,i=r.version,u=void 0===i?"5":i,c=r.chainId,d=r.fetcher,f=Z({apiURL:o,chainId:c,fetcher:d,version:u}).buildTx,v=j({apiURL:o,version:u,chainId:c,fetcher:d}).getRate,m=function(){var r=n(l.mark((function r(n,s,o){var i,u,c,d,f,h,m,k,y,g,w;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.srcToken,u=n.destToken,c=n.amount,f=void 0===(d=n.options)?{}:d,h=p(n,lt),e.assert(s.length>0,"must pass at least 1 order"),m=vt(s),k=m.totalTakerAmount,e.assert(m.takerAsset.toLowerCase()===u.toLowerCase(),"All orders must have the same takerAsset as destToken"),y=k.toString(10),c&&e.assert(c===y,"`amount` must equal the total of the orders' `takerAmounts`"),g=a({},f,{includeContractMethods:[t.ContractMethod.simpleBuy]}),w=a({},h,{srcToken:i,destToken:u,amount:y,side:t.SwapSide.BUY,options:g}),r.next=11,v(w,o);case 11:return r.abrupt("return",r.sent);case 13:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}();return{getLimitOrdersRate:m,buildLimitOrderTx:function(t,e,r){var n=vt(t.orders),s=n.makerAsset,o=a({},t,{srcToken:n.takerAsset,srcAmount:n.totalTakerAmount.toString(10),destToken:s});return f(o,e,r)},buildSwapAndLimitOrderTx:function(t,e,r){var n=vt(t.orders),s=a({},t,{srcToken:t.priceRoute.srcToken,destToken:n.makerAsset,destDecimals:t.priceRoute.destDecimals},t.slippage?{slippage:t.slippage}:{srcAmount:t.priceRoute.srcAmount,slippage:void 0});return f(s,e,r)}}};function vt(t){e.assert(b(t),"must pass at least 1 order");var r=t.reduce((function(t,e){return t.takerAssetsSet.add(e.takerAsset.toLowerCase()),t.makerAssetsSet.add(e.makerAsset.toLowerCase()),t.totalTakerAmount=t.totalTakerAmount+BigInt(e.takerAmount),t}),{takerAssetsSet:new Set,makerAssetsSet:new Set,totalTakerAmount:BigInt(0)}),n=r.makerAssetsSet,a=r.totalTakerAmount;e.assert(1===r.takerAssetsSet.size,"All orders must have the same takerAsset as destToken"),e.assert(1===n.size,"All orders must have the same makerAsset");var s=t[0];return{totalTakerAmount:a,maker:s.maker,taker:s.taker,makerAsset:s.makerAsset,takerAsset:s.takerAsset}}var mt=function(t){var e=t.chainId,r=S(t).getContracts,s=function(){var t=n(l.mark((function t(n,s){var o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(s);case 2:return t.abrupt("return",V(a({},n,{chainId:e,verifyingContract:(o=t.sent).AugustusRFQ,AugustusAddress:o.AugustusSwapper})));case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return{buildNFTOrder:s}},kt=function(t){return{signNFTOrder:function(e){var r=a({},e,{data:J(e.data)});return t.contractCaller.signTypedDataCall(r)}}},yt=function(t){var e=ot(t);return{cancelNFTOrder:e.cancelLimitOrder,cancelNFTOrderBulk:e.cancelLimitOrderBulk}},gt=function(t){var e=t.apiURL,r=t.fetcher,a=$({apiURL:void 0===e?h:e,chainId:t.chainId}),s=function(){var t=n(l.mark((function t(e,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(e.type),o=s+"/"+("maker"in e?"maker/"+e.maker:"taker/"+e.taker),t.next=5,r({url:o,method:"GET",signal:n});case 5:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o=function(){var t=n(l.mark((function t(e,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(),o=s+"/"+e,t.next=4,r({url:o,method:"GET",signal:n});case 4:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return{getNFTOrders:s,getNFTOrderByHash:o}},wt=function(t){var e=t.apiURL,r=t.fetcher,s=$({apiURL:void 0===e?h:e,chainId:t.chainId}),o=function(){var t=n(l.mark((function t(e,n,o){var i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s(n),t.next=3,r({url:i,method:"POST",data:e,signal:o});case 3:return t.abrupt("return",a({},t.sent.order));case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();return{postNFTLimitOrder:function(t,e){return o(t,"LIMIT",e)},postNFTP2POrder:function(t,e){return o(t,"P2P",e)}}},xt=function(t){var e=S(t);return{getNFTOrdersContract:e.getAugustusRFQ,getTokenTransferProxy:e.getSpender}},At=[{constant:!1,inputs:[{name:"_operator",type:"address"},{name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],bt=function(t){var e=I(t).approveToken,r=(0,xt(t).getNFTOrdersContract)(),a=function(){var e=n(l.mark((function e(n,a){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),e.next=3,t.contractCaller.transactCall({address:n,abi:At,contractMethod:"setApprovalForAll",args:[r,!0],overrides:a});case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return{approveERC20ForNFTOrder:e,approveNFTorNFTOrder:a}},Tt=["srcToken","destToken","amount","options"],St=function(r){var s=r.apiURL,o=void 0===s?h:s,i=r.version,u=void 0===i?"5":i,c=r.chainId,d=r.fetcher,f=Z({apiURL:o,version:u,chainId:c,fetcher:d}).buildTx,v=j({apiURL:o,version:u,chainId:c,fetcher:d}).getRate,m=function(){var r=n(l.mark((function r(n,s,o){var i,u,c,d,f,h,m,k,y,g,w;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.srcToken,u=n.destToken,c=n.amount,f=void 0===(d=n.options)?{}:d,h=p(n,Tt),e.assert(s.length>0,"must pass at least 1 order"),m=Lt(s),k=m.totalTakerAmount,e.assert(m.takerAsset.toLowerCase()===u.toLowerCase(),"All orders must have the same takerAsset as destToken"),y=k.toString(10),c&&e.assert(c===y,"`amount` must equal the total of the orders' `takerAmounts`"),g=a({},f,{includeContractMethods:[t.ContractMethod.simpleBuy]}),w=a({},h,{srcToken:i,destToken:u,amount:y,side:t.SwapSide.BUY,options:g}),r.next=11,v(w,o);case 11:return r.abrupt("return",r.sent);case 13:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}();return{getNFTOrdersRate:m,buildNFTOrderTx:function(t,e,r){var n=Lt(t.orders),s=a({},t,{srcToken:n.takerAsset,srcAmount:n.totalTakerAmount.toString(10),destToken:"NFT"});return f(s,e,r)},buildSwapAndNFTOrderTx:function(t,e,r){Lt(t.orders);var n=a({},t,{srcToken:t.priceRoute.srcToken},t.slippage?{slippage:t.slippage}:{srcAmount:t.priceRoute.srcAmount,slippage:void 0},{destToken:"NFT",destDecimals:t.priceRoute.destDecimals});return f(n,e,r)}}};function Lt(t){e.assert(b(t),"must pass at least 1 order");var r=t.reduce((function(t,e){return t.takerAssetsSet.add(e.takerAsset.toLowerCase()),t.makerAssetsSet.add(e.makerAsset.toLowerCase()),t.totalTakerAmount=t.totalTakerAmount+BigInt(e.takerAmount),t}),{takerAssetsSet:new Set,makerAssetsSet:new Set,totalTakerAmount:BigInt(0)}),n=r.makerAssetsSet,a=r.totalTakerAmount;e.assert(1===r.takerAssetsSet.size,"All orders must have the same takerAsset as destToken"),e.assert(1===n.size,"All orders must have the same makerAsset");var s=t[0],o=s.makerAsset,i=s.takerAsset;return{totalTakerAmount:a,maker:s.maker,taker:s.taker,makerAsset:o.startsWith("0x")?o:Ot(o),takerAsset:i.startsWith("0x")?i:Ot(i)}}function Ot(t){return"0x"+(BigInt(t)&(BigInt(1)<<BigInt(160))-BigInt(1)).toString(16)}var It=function(t,e){return function(){var r=n(l.mark((function r(n){var s;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=null!=e&&e.apiKey?a({"X-API-KEY":e.apiKey},n.headers):n.headers,r.next=4,t.request(a({},n,{headers:s}));case 4:return r.abrupt("return",r.sent.data);case 9:if(r.prev=9,r.t0=r.catch(0),!t.isAxiosError(r.t0)){r.next=13;break}throw new x(r.t0);case 13:throw r.t0;case 14:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(t){return r.apply(this,arguments)}}()},Rt=function(t,e){return function(){var r=n(l.mark((function r(n){var s,o,i,u,c,p,d,f,h;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=n.url,i=n.signal,u="POST"===(o=n.method)?JSON.stringify(n.data):null,c="POST"===o&&u?{"Content-Type":"application/json"}:void 0,p=null!=e&&e.apiKey?a({"X-API-KEY":e.apiKey},n.headers):void 0,d=c||p||n.headers?a({},p,c,n.headers):void 0,r.next=8,t(s,{method:o,body:u,signal:i,headers:d});case 8:return f=r.sent,r.next=11,f.json();case 11:if(h=r.sent,f.ok){r.next=14;break}throw new x({code:String(f.status),response:{data:h,status:f.status,statusText:f.statusText,headers:Object.fromEntries(f.headers.entries()),config:{url:s,method:o}},message:f.statusText,isAxiosError:!1});case 14:return r.abrupt("return",h);case 17:if(r.prev=17,r.t0=r.catch(0),!(r.t0 instanceof x)){r.next=21;break}throw r.t0;case 21:throw new x(r.t0);case 22:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(t){return r.apply(this,arguments)}}()},Pt=["block","gas"],Ct=["gas","from"],Et=function(t,r){var s=t.ethersProviderOrSigner,o=t.EthersContract,i=function(){var t=n(l.mark((function t(e){var r,n,i,u,c,d,f,h,v;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.contractMethod,i=e.args,u=e.overrides,m(c=new o(e.address,e.abi,s),n),d=u.block,f=u.gas,h=p(u,Pt),v=a({},h,{blockTag:d,gasLimit:f}),t.abrupt("return",(r=c.callStatic)[n].apply(r,i.concat([v])));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=n(l.mark((function t(n){var i,u,c,d,f,h,v,k,y,g,w;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(r,"account must be specified to create a signer"),e.assert(Ft(s)||Mt(s),"ethers must be an instance of Signer or JsonRpcProvider to create a signer"),i=n.address,u=n.abi,c=n.contractMethod,d=n.args,f=n.overrides,h="getSigner"in s?s.getSigner(r):s,m(v=new o(i,u,h),c),k=f.gas,y=p(f,Ct),g=a({},y,{gasLimit:k}),w=g,t.next=11,v[c].apply(v,d.concat([w]));case 11:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=n(l.mark((function t(n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(r,"account must be specified to create a signer"),e.assert(Ft(s)||Mt(s),"ethers must be an instance of Signer or JsonRpcProvider to create a signer"),a="getSigner"in s?s.getSigner(r):s,e.assert(Ut(a),"Signer can sign typed data"),t.abrupt("return",a._signTypedData(n.domain,n.types,n.data));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{staticCall:i,transactCall:u,signTypedDataCall:c}};function Ft(t){return function(t){return"_isProvider"in t&&t._isProvider}(t)&&"getSigner"in t}function Mt(t){return"_isSigner"in t&&t._isSigner}function Ut(t){return"_signTypedData"in t}var Bt=["block","gas"],Nt=["gas","from"],Dt=function(t,r){var s=function(){var r=n(l.mark((function r(n){var s,o,i,u,c,d,f,h;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.assert(t.currentProvider,"web3.currentProvider is not set"),o=n.contractMethod,i=n.args,u=n.overrides,y(c=new t.eth.Contract(n.abi,n.address),o),d=u.gas,f=p(u,Bt),h=a({},f,{gas:d}),r.abrupt("return",(s=c.methods)[o].apply(s,i).call(h));case 7:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),o=function(){var s=n(l.mark((function n(s){var o,i,u,c,d,f,h,v,m,k,g,w,x;return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.assert(t.currentProvider,"web3.currentProvider is not set"),e.assert(r,"account must be specified to send transactions"),i=s.contractMethod,u=s.args,c=s.overrides,y(d=new t.eth.Contract(s.abi,s.address),i),f=c.gas,h=c.from,v=p(c,Nt),e.assert(m=h||r,"from is required"),k=a({},v,{from:m,gas:f}),g=(o=d.methods)[i].apply(o,u),w=g.send(k),x={on:w.on.bind(w),once:w.once.bind(w)},n.abrupt("return",x);case 13:case"end":return n.stop()}}),n)})));return function(t){return s.apply(this,arguments)}}(),i=function(){var s=n(l.mark((function n(s){var o,i,u,c,p;return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.assert(t.currentProvider,"web3.currentProvider is not set"),e.assert(r,"account must be specified to sign data"),e.assert(_t(o=t.currentProvider),"web3.currentProvider needs to be capable of sending arbitrary rpc calls"),i=s.data,u=s.domain,p={types:a({EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},c=s.types),primaryType:Gt(c),domain:u,message:i},n.next=8,new Promise((function(t,e){o.send({jsonrpc:"2.0",method:"eth_signTypedData",params:[r,p]},(function(r,n){if(r)return e(r);if(!n)throw new Error("No result in response to eth_signTypedData");t(n)}))}));case 8:return n.abrupt("return",n.sent.result);case 10:case"end":return n.stop()}}),n)})));return function(t){return s.apply(this,arguments)}}();return{staticCall:s,transactCall:o,signTypedDataCall:i}};function _t(t){return!!t&&"object"==typeof t&&"send"in t}var jt=/^([^\x5b]*)(\x5b|$)/;function Gt(t){var r=Object.keys(t),n=new Set(r);r.forEach((function(e){var r=t[e];r&&r.forEach((function(t){var e,r=null==(e=t.type.match(jt))?void 0:e[1];r&&n.delete(r)}))}));var a=Array.from(n)[0];return e.assert(a,"No primary type found in SignableTypedData types, "+JSON.stringify(t)),a}var zt=function(t){for(var e,r,n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];var i=s.reduce((function(e,r){var n=r(t);return Object.assign(e,n)}),{}),u=a({},i,{apiURL:null!=(e=t.apiURL)?e:h,version:null!=(r=t.version)?r:"5",chainId:t.chainId});return u},Kt=function(t){return zt(t,E,K,S,I,Z,F,j,z)},qt=function(t){var e=nt(t).buildLimitOrder,r=at(t).signLimitOrder,s=pt(t),o=s.postLimitOrder,i=s.postP2POrder,u=function(){var t=n(l.mark((function t(n,s){var o,i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:return o=t.sent,t.next=5,r(o);case 5:return i=a({},o.data,s,{signature:t.sent}),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),c=function(){var t=n(l.mark((function t(e,r,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),t.next=3,u(e,r);case 3:return a=t.sent,t.next=6,o(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),p=function(){var t=n(l.mark((function t(e,r,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),t.next=3,u(e,r);case 3:return a=t.sent,t.next=6,i(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();return{submitLimitOrder:c,submitP2POrder:p}},Ht=function(t){return a({},ct(t),ft(t),qt(t),nt(t),at(t),pt(t),ot(t),dt(t),ut(t),ht(t))},Qt=function(t){var e=mt(t).buildNFTOrder,r=kt(t).signNFTOrder,s=wt(t),o=s.postNFTLimitOrder,i=s.postNFTP2POrder,u=function(){var t=n(l.mark((function t(n,s){var o,i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:return o=t.sent,t.next=5,r(o);case 5:return i=a({},o.data,s,{signature:t.sent}),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),c=function(){var t=n(l.mark((function t(e,r,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),t.next=3,u(e,r);case 3:return a=t.sent,t.next=6,o(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),p=function(){var t=n(l.mark((function t(e,r,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),t.next=3,u(e,r);case 3:return a=t.sent,t.next=6,i(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();return{submitNFTOrder:c,submitP2POrder:p}},Xt=function(t){return a({},gt(t),xt(t),Qt(t),mt(t),kt(t),wt(t),yt(t),bt(t),St(t))},Yt=function(){function r(t){var r=t.chainId,n=void 0===r?1:r,a=t.apiURL,s=void 0===a?h:a,o=t.version,i=void 0===o?"5":o,u=t.apiKey,c=t.web3Provider,p=t.ethersDeps,d=t.account,f=t.axios,l=t.fetch;this.sdk={},this.fetcher=void 0,this.chainId=void 0,this.apiURL=void 0,this.version=void 0,this.web3Provider=void 0,this.ethersDeps=void 0,this.account=void 0,this.chainId=n,this.apiURL=s,this.version=i,this.web3Provider=c,this.ethersDeps=p,this.account=d;var v=f?It(f,{apiKey:u}):l?Rt(l,{apiKey:u}):null;if(e.assert(v,"at least one fetcher is needed"),this.fetcher=v,c||p){var m=p?Et(p,d):c?Dt(c,d):null;m&&(this.sdk=Kt({fetcher:v,contractCaller:m,apiURL:s,version:i,chainId:n}))}else this.sdk=zt({fetcher:v,apiURL:s,version:i,apiKey:u,chainId:n},E,K,S,Z,F,j)}r.handleAPIError=function(t){if(!w(t))return{message:"Unknown error: "+t};if(!t.response)return{message:t.message};var e=t.response,r=e.data;return{status:e.status,message:A(r)?r.error:t.message,data:r}},r.extractHashFromTxResponse=function(){var t=n(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("once"in e)){t.next=2;break}return t.abrupt("return",new Promise((function(t,r){e.once("transactionHash",t),e.once("error",r)})));case 2:return t.next=4,e;case 4:return t.abrupt("return",t.sent.hash);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var a=r.prototype;return a.setWeb3Provider=function(t,e){var r=Dt(t,e);return this.sdk=Kt({fetcher:this.fetcher,contractCaller:r,apiURL:this.apiURL,version:this.version,chainId:this.chainId}),this.web3Provider=t,this.ethersDeps=void 0,this.account=e,this},a.setEthersProvider=function(t,e){var r=Et(t,e);return this.sdk=Kt({fetcher:this.fetcher,contractCaller:r,apiURL:this.apiURL,version:this.version,chainId:this.chainId}),this.web3Provider=void 0,this.ethersDeps=t,this.account=e,this},a.getTokens=function(){var t=n(l.mark((function t(){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getTokens,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getTokens();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),a.getAdapters=function(){var t=n(l.mark((function t(){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getAdapters,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAdapters();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),a.getRateByRoute=function(){var a=n(l.mark((function n(a,s,o,i,u,c,p){return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===i&&(i=t.SwapSide.SELL),e.assert(this.sdk.getRateByRoute,"sdk must be initialized with a fetcher"),!(a.length<2)){n.next=4;break}return n.abrupt("return",{message:"Invalid Route"});case 4:return n.prev=4,n.next=7,this.sdk.getRateByRoute({route:a,amount:s,userAddress:o,side:i,options:u,srcDecimals:c,destDecimals:p});case 7:return n.abrupt("return",n.sent);case 10:return n.prev=10,n.t0=n.catch(4),n.abrupt("return",r.handleAPIError(n.t0));case 13:case"end":return n.stop()}}),n,this,[[4,10]])})));return function(t,e,r,n,s,o,i){return a.apply(this,arguments)}}(),a.getRate=function(){var a=n(l.mark((function n(a,s,o,i,u,c,p,d){return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===u&&(u=t.SwapSide.SELL),void 0===c&&(c={}),e.assert(this.sdk.getRate,"sdk must be initialized with a fetcher"),n.prev=3,n.next=6,this.sdk.getRate({srcToken:a,destToken:s,amount:o,userAddress:i,side:u,options:c,srcDecimals:p,destDecimals:d});case 6:return n.abrupt("return",n.sent);case 9:return n.prev=9,n.t0=n.catch(3),n.abrupt("return",r.handleAPIError(n.t0));case 12:case"end":return n.stop()}}),n,this,[[3,9]])})));return function(t,e,r,n,s,o,i,u){return a.apply(this,arguments)}}(),a.buildTx=function(){var t=n(l.mark((function t(n,a,s,o,i,u,c,p,d,f,h,v,m,k,y){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===h&&(h={}),e.assert(this.sdk.buildTx,"sdk must be initialized with a fetcher"),t.prev=2,t.next=5,this.sdk.buildTx({srcToken:n,destToken:a,srcAmount:s,destAmount:o,priceRoute:i,userAddress:u,partner:c,partnerAddress:p,partnerFeeBps:d,receiver:f,srcDecimals:v,destDecimals:m,permit:k,deadline:y},h);case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return",r.handleAPIError(t.t0));case 11:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(e,r,n,a,s,o,i,u,c,p,d,f,l,h,v){return t.apply(this,arguments)}}(),a.getTokenTransferProxy=function(){var t=n(l.mark((function t(n){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getSpender,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getSpender();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),a.getAllowances=function(){var t=n(l.mark((function t(n,a){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getAllowances,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAllowances(n,a);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e,r){return t.apply(this,arguments)}}(),a.getAllowance=function(){var t=n(l.mark((function t(n,a){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getAllowance,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAllowance(n,a);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e,r){return t.apply(this,arguments)}}(),a.approveTokenBulk=function(){var t=n(l.mark((function t(n,a,s,o){var i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.approveTokenBulk,"sdk must be initialized with a provider"),t.prev=1,t.next=4,this.sdk.approveTokenBulk(n,s);case 4:return i=t.sent,t.next=7,Promise.all(i.map(r.extractHashFromTxResponse));case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(e,r,n,a){return t.apply(this,arguments)}}(),a.approveToken=function(){var t=n(l.mark((function t(n,a,s,o,i){var u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.approveToken,"sdk must be initialized with a provider"),t.prev=1,t.next=4,this.sdk.approveToken(n,s);case 4:return u=t.sent,t.next=7,r.extractHashFromTxResponse(u);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(e,r,n,a,s){return t.apply(this,arguments)}}(),a.getMarketNames=function(){var t=n(l.mark((function t(){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getAdapters,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAdapters();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),a.getBalance=function(){var t=n(l.mark((function t(n,a){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getBalance,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getBalance(n,a);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e,r){return t.apply(this,arguments)}}(),a.getBalances=function(){var t=n(l.mark((function t(n){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.assert(this.sdk.getBalances,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getBalances(n);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),r}();Object.defineProperty(exports,"ContractMethod",{enumerable:!0,get:function(){return t.ContractMethod}}),Object.defineProperty(exports,"ContractMethodV5",{enumerable:!0,get:function(){return t.ContractMethodV5}}),Object.defineProperty(exports,"ContractMethodV6",{enumerable:!0,get:function(){return t.ContractMethodV6}}),Object.defineProperty(exports,"SwapSide",{enumerable:!0,get:function(){return t.SwapSide}}),exports.API_URL=h,exports.AssetType={ERC20:0,ERC1155:1,ERC721:2},exports.DEFAULT_VERSION="5",exports.ParaSwap=Yt,exports.constructAllLimitOrdersHandlers=Ht,exports.constructAllNFTOrdersHandlers=Xt,exports.constructApproveToken=I,exports.constructApproveTokenForLimitOrder=dt,exports.constructApproveTokenForNFTOrder=bt,exports.constructAxiosFetcher=It,exports.constructBuildLimitOrder=nt,exports.constructBuildLimitOrderTx=ht,exports.constructBuildNFTOrder=mt,exports.constructBuildNFTOrderTx=St,exports.constructBuildTx=Z,exports.constructCancelLimitOrder=ot,exports.constructCancelNFTOrder=yt,exports.constructEthersContractCaller=Et,exports.constructFetchFetcher=Rt,exports.constructFillOrderDirectly=ut,exports.constructFullSDK=function(t){return{swap:Kt(t),limitOrders:Ht(t),nftOrders:Xt(t)}},exports.constructGetAdapters=F,exports.constructGetBalances=E,exports.constructGetLimitOrders=ct,exports.constructGetLimitOrdersContract=ft,exports.constructGetNFTOrders=gt,exports.constructGetNFTOrdersContract=xt,exports.constructGetRate=j,exports.constructGetSpender=S,exports.constructGetTokens=K,exports.constructPartialSDK=zt,exports.constructPostLimitOrder=pt,exports.constructPostNFTOrder=wt,exports.constructSignLimitOrder=at,exports.constructSignNFTOrder=kt,exports.constructSimpleSDK=function(t,e){var r,s,o=function(t){return"axios"in t?It(t.axios,t):"fetch"in t?Rt(t.fetch,t):function(e){var r=null!=t&&t.apiKey?a({"X-API-KEY":t.apiKey},e.headers):e.headers;return t.fetcher(a({},e,{headers:r}))}}(t);if(!e){var i,u,c={apiURL:t.apiURL,chainId:t.chainId,version:t.version,fetcher:o};return{swap:zt(c,E,K,S,Z,F,j,z),limitOrders:zt(c,nt,pt,ct,ft,ht),nftOrders:zt(c,mt,wt,gt,xt,St),apiURL:null!=(i=t.apiURL)?i:h,chainId:t.chainId,version:null!=(u=t.version)?u:"5"}}var p=function(t){if("ethersProviderOrSigner"in t){var e=Et(t,t.account),r=e.staticCall,a=e.transactCall,s=e.signTypedDataCall,o=function(){var t=n(l.mark((function t(e){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e);case 2:return t.abrupt("return",t.sent.hash);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{staticCall:r,transactCall:o,signTypedDataCall:s}}var i=Dt(t.web3,t.account),u=i.staticCall,c=i.transactCall,p=i.signTypedDataCall,d=function(){var t=n(l.mark((function t(e){var r;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:return r=t.sent,t.abrupt("return",new Promise((function(t,e){r.once("transactionHash",t),r.once("error",e)})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{staticCall:u,transactCall:d,signTypedDataCall:p}}(e),d={apiURL:t.apiURL,version:t.version,chainId:t.chainId,fetcher:o,contractCaller:p};return{swap:Kt(d),limitOrders:Ht(d),nftOrders:Xt(d),apiURL:null!=(r=t.apiURL)?r:h,chainId:t.chainId,version:null!=(s=t.version)?s:"5"}},exports.constructSubmitLimitOrder=qt,exports.constructSubmitNFTOrder=Qt,exports.constructSwapSDK=Kt,exports.constructSwapTx=z,exports.constructToken=P,exports.constructWeb3ContractCaller=Dt,exports.isAllowance=function(t){return"allowance"in t},exports.isFetcherError=w;
//# sourceMappingURL=sdk.cjs.production.min.js.map
